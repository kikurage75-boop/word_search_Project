:root{
  --bg:#fafafa; --fg:#111; --muted:#666; --border:#e6e6e6;
  --cell:36px;
  --frame:#000;
  --answer:#888; --answer-w:1.2px;
  --alt:#e67e22; --alt-w:1.2px;
}

*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--fg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;line-height:1.5}

header,footer{background:#fff}
header{position:sticky;top:0;z-index:10;padding:12px 16px;border-bottom:1px solid var(--border);
  display:flex;align-items:center;gap:16px;flex-wrap:wrap}
h1{font-size:18px;font-weight:700;margin:0}
footer{padding:10px 16px;border-top:1px solid var(--border);text-align:center;color:var(--muted)}

.controls{display:flex;gap:8px;flex-wrap:wrap}
.controls button{appearance:none;border:1px solid #ddd;background:#fff;padding:8px 12px;border-radius:10px;cursor:pointer}
.controls button:hover{background:#f6f6f6}
.badge{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border:1px solid #ddd;border-radius:999px;background:#fff;font-size:12px}
.badge input, .badge select{font:inherit}

main{padding:16px;;display:grid;grid-template-columns:1fr 320px;gap:16px;align-items:start}
#gridContainer,#wordList{background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:0 8px 28px rgba(0,0,0,.05);padding:12px}

.grid-wrap{position:relative;display:inline-block;padding:16px;background:#fff;border-radius:12px;box-shadow:0 8px 28px rgba(0,0,0,.06)}
.grid{display:inline-grid;border:1.5pt solid var(--frame);background:#fff;user-select:none}
.cell{
  width:var(--cell);height:var(--cell);
  display:flex;align-items:center;justify-content:center;
  font-size:calc(var(--cell)*0.5);line-height:1;
  outline:none;
}
.cell[contenteditable="true"]{caret-color:#0a7d3b}
.cell:focus{box-shadow:inset 0 0 0 2px rgba(10,125,59,.2)}

#answerOverlay{position:absolute;left:16px;top:16px;pointer-events:none}
.answer{stroke:var(--answer);stroke-width:var(--answer-w);fill:none;stroke-linecap:round}
.alt{stroke:var(--alt);stroke-width:var(--alt-w);fill:none;stroke-linecap:round;stroke-dasharray:4 3}
body[data-answers="off"] #answerOverlay .answer{display:none}

#wordList{max-height:calc(100vh - 160px);overflow:auto}
.word-item{padding:6px 8px;border-bottom:1px dashed #eee;font-feature-settings:"palt" 1; display:grid; grid-template-columns:auto 1fr; gap:8px;}
.word-item:last-child{border-bottom:none}
.meta{color:#666;font-size:12px}

.audio-btn{appearance:none;border:1px solid #ddd;background:#fff;padding:2px 8px;border-radius:8px;cursor:pointer}
.audio-btn[disabled]{opacity:.4;cursor:not-allowed}

@media (max-width:960px){
  main{grid-template-columns:1fr}
  #wordList{order:2}
}

@media print{
  header,.controls{display:none!important}
  body{background:#fff}
}

.cell {
  color: black !important;
  background: white !important;
  font-size: 20px !important;
  font-family: sans-serif !important;
}

.word-item .editable { border-bottom: 1px dashed #bbb; padding: 0 2px; outline: none; }
.word-item .editable:focus { border-bottom-style: solid; }
.word-item .ov-reset { margin-left: 6px; opacity: .7; }
.word-item .ov-reset:hover { opacity: 1; }
