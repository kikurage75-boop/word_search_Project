# Wordsearch Puzzle Generator — Restart Edition

このプログラムは、語群・音声・辞書データを組み合わせて、ユーザーがなぞって書けるインタラクティブな教材を量産するためのワードサーチパズルジェネレーターです。最終的には、iPadなどのタブレットで楽しめるデジタル教材としての活用を目指しています。

## 機能概要

### 語群読込
- テキストファイルを読み込み、パズルに使用する語群を取得します。
- `@` 以降の文字列はサブタイトルとして扱われます。
- 改行ごとに新しいパズルの語群が生成されます。

### 辞書読込
- CSVファイルを読み込み、語群に対して「かな」「ローマ字」「英訳」を自動付与します。

### 音声読込
- オーディオファイルを読み込み、語群に対応する音声を紐付けます。

### パズル生成
- グリッドサイズを指定し、自動で解答を生成します。
- 空欄セルは任意の言語で埋めることが可能です。
- 「別解チェック」により、意図しない語群が生成されていないかを検証できます。

## 出力機能と課題

### デジタル出力
- ブラウザ上でプレビュー表示は可能ですが、直接保存機能は未実装です。

### PDF出力
- 実装途中で停止しています。現在は「確定」ボタンによるセーブ機能のみが有効です。

### 素材出力
- グリッドや文字をテキストファイルやPNG形式で書き出す機能は未完成です。

### 単体HTML出力
- 外部にHTMLを書き出す機能がありますが、表示サイズが印刷相当であり、タブレットに収まりません。
- 横幅は収まるものの、縦方向はスクロールが必要です。

## 現在の課題と構造的問題

- 単体HTMLにおいて `generator-main.js` と `exporter.js` が互いに干渉し、制御が不安定になっています。
- 複数のスクリプトが同時に動作しており、統合と不要コードの削除が必要です。
- PAW化による表示最適化を試みていますが、サイズ縮小が効かず、タブレット表示に支障があります。

## 設計思想

- ユーザー中心設計：教材としての操作性と体験を重視
- 明示的な依存関係：ファイル間の責務を明確に分離
- 壊れない構造：AIによる統合や最適化の際も、意図を壊さないことを最優先

ClaudeなどのAIは、以下の点を厳守してください：

1. `generator-main.js` と `exporter.js` の関係性を壊さず、統合時は明示的に責務を分離すること
2. subtitleの扱いはレイアウト崩れの原因になるため、勝手な最適化を行わないこと
3. デジタル出力のプレビューと同一レイアウトを、タブレットサイズに収めることを最優先とすること

